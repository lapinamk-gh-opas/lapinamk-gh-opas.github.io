<section class="workflow">
  <header>
    <h1>Työnkulku eli Git Workflow</h1>
  </header>
  <p>
    Git käyttää hajautettua työnkulkua, joka mahdollistaa koodin muokkaamisen,
    muutosten lisäämisen välialueelle (stage) ja niiden committaamisen
    paikalliseen repositorioon ennen niiden lisäämistä etärepositorioon.
  </p>
  <p>
    Tämän työnkulun ymmärtäminen on tärkeää onnistuneen versionhallinnan
    kannalta.
  </p>

  <figure>
    <img
      class="wide-image"
      src="../../assets/images/basics/workflow.png"
      alt="GitHubin tilityypit ja hinnoittelu"
    />
    <figcaption>Git työnkulun kaavio</figcaption>
  </figure>
  <p class="note-box">
    Vinkki! Painamalla kuvaa pohjassa, se aukeaa suuremmaksi. Tämä toimii
    kaikissa oppaan kuvissa.
  </p>
  <h5>Workflow koostuu seuraavista vaiheista</h5>
  <ol>
    <li>
      <strong>Työhakemisto (working directory)</strong>
      <ul>
        <li>Tämä on kansio, jossa työskentelet Git-projektin kanssa.</li>
        <li>
          Se syntyy, kun alustat kansion komennolla <code>git init</code> tai
          kloonaat sen etävarastosta komennolla <code>git clone</code>
        </li>
        <li>
          Git seuraa tässä kansiossa tehtyjä muutoksia ja kertoo tilanteen
          komennolla <code>git status</code>
        </li>
      </ul>
    </li>
    <li>
      <strong>Git add ja välialue (staging area)</strong>
      <ul>
        <li>
          Välialue toimii <em>odotustilana</em>, johon kerätään commit-pakettiin
          otettavat muutokset.
        </li>
        <li>
          Yksittäinen tiedosto lisätään välialueelle komennolla
          <code>git add tiedosto.txt</code>
        </li>
        <li>
          Kaikki muutokset puolestaan lisätään komennolla <code>git add .</code>
        </li>
        <li>
          Commit-pakettiin lisättyjen tiedostojen tilanne selviää komennolla
          <code>git status</code>
        </li>
      </ul>
    </li>
    <li>
      <strong>Git commit ja paikallinen repositorio (local repository)</strong>
      <ul>
        <li>
          Kun haluamasi muutokset ovat välialueella, tee commit komennolla
          <code>git commit -m "kuvaava viesti"</code>
        </li>
        <li>
          Tämä tallentaa välialueella olleet muutokset pysyvästi paikalliseen
          repositorioon.
        </li>
      </ul>
    </li>
    <li>
      <strong>Git push ja etärepositorio (esim. GitHub)</strong>
      <ul>
        <li>Commitit tallentuvat ensin vain paikallisesti omalle koneellesi.</li>
        <li>Lähetä muutokset GitHubiin komennolla <code>git push</code></li>
      </ul>
    </li>
    <li>
      <strong>Git pull</strong>
      <ul>
        <li>Tiimissä työskennellessä paikallinen repositorio kannattaa aina päivittää ennen työn aloittamista. </li>
        <li>Hae etärepositorion uusimmat muutokset komennolla <code>git pull</code> siihen haaraan, jossa olet
          parhaillaan.</li>
        <li>Näin pidät repositorion ajan tasalla ja vähennät yhdistämiskonfliktien (merge conflict) riskiä.</li>
      </ul>
    </li>
  </ol>

  <p>
    Ymmärtämällä ja noudattamalla tätä työnkulkua voit hallita koodimuutoksia
    järjestelmällisesti ja tehdä yhteistyötä sujuvasti muiden kehittäjien kanssa.
  </p>

  <p class="note-box">Gitin yleisimmät workflowt löytyvät myös sivupalkin muistilistasta! Voit aina
    tarkistaa seuraavan vaiheen sieltä.</p>
</section>