<section class="basic-problems">
  <h1>Miten selvit√§ ongelmatilanteesta</h1>

  <p>
    Git on tehokas ty√∂kalu, mutta aina asiat eiv√§t mene suunnitelmien mukaan.
    Ehk√§ unohdit commitata
    muutoksen, teit virheen komennossa tai poistit vahingossa t√§rkeit√§
    tiedostoja.
  </p>

  <p>
    <em>No problem!</em> Versionhallinnan vahvuus on se, ett√§
    <strong>virheist√§ voi l√§hes aina toipua</strong>. Git my√∂s kertoo, mik√§li
    teet virheit√§
    komentoja antaessasi tai yrit√§t jotain, mik√§ ei ole sallittua. Kokeile siis
    asioita rohkeasti!
  </p>

  <h5>Katso miss√§ menn√§√§n</h5>
  <p>
    Aja <code>git status</code> ja lue viesti rauhassa. Voit ajaa t√§m√§n komennon
    joka v√§liss√§, jotta
    pysyt kartalla siit√§ mit√§ tapahtuu.
  </p>

  <h5>Ongelma komennon kanssa</h5>
  <p>
    Jos jokin komento tuottaa p√§√§nvaivaa, avaa sen viralliset ohjeet selaimeen
    komennolla
    <code>git help &lt;komento&gt;</code> T√§m√§ antaa yksityiskohtaisen
    selityksen komennon k√§yt√∂st√§.
    Usein nopea yhteenveto l√∂ytyy my√∂s komennolla
    <code>git &lt;komento&gt; -h</code> Kokeile
    rohkeasti molempia!
  </p>

  <h5>Vahingossa poistettu tiedosto</h5>
  <p>
    Jos tiedosto on poistettu, mutta et ole viel√§ commitannut, voit palauttaa
    sen helposti
    komennolla
    <code>git restore &lt;tiedosto&gt;</code> Jos taas tiedosto on poistettu ja
    commitattu, voit
    palauttaa sen aiemmasta commitista komennolla
    <code>git restore --source=HEAD~1 -- &lt;tiedosto&gt;</code>
  </p>

  <div
    class="accordion"
    data-include="/accordion-element/accordion.html"
    data-title="Mik√§ on HEAD~1">
    <div class="contentToAccordion">
      <p><strong>HEAD</strong> on osoitin nykyiseen tilanteeseesi. Se merkkaa
        viimeisint√§ committia
        siin√§ haarassa, jossa olet.</p>
      <ul>
        <li><code>HEAD</code> = t√§m√§ hetki</li>
        <li><code>HEAD~1</code> = yksi commit taaksep√§in</li>
        <li><code>HEAD~2</code> = kaksi committia taaksep√§in </li>
      </ul>

      <h6><strong>Esimerkkej√§</strong></h6>
      <ul>
        <li>Palauta tiedosto edellisest√§ commitista
          <code>git restore --source=HEAD~1 -- polku/tiedosto</code>
        </li>
        <li>Katso edellisen commitin tiedot <code>git show HEAD~1</code></li>
        <li>
          Vertaa nykyist√§ tilannetta edelliseen commit-tilaan
          <code>git diff HEAD~1</code>
        </li>
      </ul>

      <h6><strong>Detached HEAD</strong></h6>
      <p>
        Jos avaat suoraan tietyn commit-id:n, et ole en√§√§ haarassa vaan
        pelk√§st√§√§n kyseisess√§
        commitissa. T√§m√§ on
        <em>detached HEAD</em> -tila. Muista aina palata takaisin haaraan ennen
        kuin teet uusia
        committeja, muuten ne voivat kadota.
      </p>

      <h6><strong>HEAD historian tarkastelu</strong></h6>
      <p>
        <code>git reflog</code> n√§ytt√§√§ mihin <code>HEAD</code> on liikkunut ja
        auttaa palaamaan
        takaisin.
      </p>
    </div>
  </div>

  <h5>Rollback eli commitin peruuttaminen</h5>
  <p>
    Joskus commit saattaa menn√§ pieleen tai huomaat heti sen j√§lkeen, ett√§
    haluat muuttaa tai
    poistaa tekem√§si muutokset. Gitiss√§ on useita tapoja perua commit riippuen
    tilanteesta ja siit√§,
    haluatko s√§ilytt√§√§ vai poistaa tehdyt muutokset kokonaan.
  </p>

  <div class="note-box">
    <ul>
      <li class="warning"><strong>K√§yt√§ n√§it√§ toimintoja varoen!</strong>
        Gitin versiohistoria on t√§rke√§ osa
        projektin eheytt√§, joten harkitse aina tarkkaan ennen kuin teet
        muutoksia.</li>
    </ul>
  </div>

  <ul>
    <li>
      <strong>Muokkaa viimeisint√§ committia</strong><br />
      Komento <code>git commit --amend</code> avaa edellisen commitin
      muokattavaksi. Voit
      esimerkiksi korjata commit-viestin tai lis√§t√§ unohtuneita tiedostoja ennen
      kuin olet puskenut
      muutokset.
      <ul>
        <li>Esimerkiksi jos juuri teit commitin, mutta unohdit lis√§t√§ tiedoston,
          lis√§√§ se ensin
          normaalisti <code>git add tiedosto.txt</code> ja aja sen j√§lkeen
          <code>git commit --amend</code> T√§m√§ avaa editorin, jossa voit muokata
          commit-viesti√§ tai
          j√§tt√§√§ sen ennalleen. Kun tallennat ja suljet editorin, edellinen
          commit p√§ivitet√§√§n
          sis√§lt√§m√§√§n my√∂s uusi tiedosto. Huom! T√§m√§ muuttaa commitin ID:t√§,
          joten √§l√§ k√§yt√§ t√§t√§
          komentoa, jos olet jo puskenut commitin et√§repoon!
        </li>
      </ul>
    </li>

    <li>
      <strong>Peru commit, mutta s√§ilyt√§ tehdyt muutokset</strong><br />
      <ul>
        <li>Komento <code>git reset --soft HEAD~1</code> siirt√§√§ haaran
          osoittimen taaksep√§in ja
          j√§tt√§√§ muutokset stagingiin.<br />
        </li>
        <li>Komento <code>git reset HEAD~1</code> (oletus <em>--mixed</em>)
          siirt√§√§ osoittimen
          taaksep√§in ja pudottaa muutokset takaisin ty√∂puuhun, eiv√§tk√§ ne ole
          en√§√§ stagingissa.
        </li>
      </ul>
    </li>

    <li>
      <strong>Peru commit ja poista tehdyt muutokset</strong><br />
      <code>git reset --hard HEAD~1</code> palauttaa tilan edelliseen
      commit-tilaan ja poistaa sek√§
      stagingin ett√§ ty√∂puun muutokset. T√§t√§ komentoa ei voi perua helposti,
      joten k√§yt√§ sit√§
      eritt√§in varovasti!
    </li>

    <li>
      <strong>Jos olet jo puskenut commitin et√§repoon</strong><br />
      Jos commit on jo jaettu muiden kanssa (esim. GitHubissa), k√§yt√§ mieluummin
      <code>git revert &lt;commit-id&gt;</code> T√§m√§ luo uuden commitin, joka
      kumoaa edellisen ja
      s√§ilytt√§√§ historian ehe√§n√§. Commit-id:n n√§et komennolla
      <code>git log</code>
    </li>
  </ul>

  <p class="note-box">
    <strong>Vinkki!</strong> Ennen <em>reset</em> ja <em>revert</em> -komentoja
    luo tilap√§inen haara (esim.
    <code>git branch backup</code>), jotta voit palauttaa tilanteen, jos jokin
    menee pieleen.
  </p>

  <h5>Tiedoston historia VS Codessa</h5>
  <p>
    Tiedoston aiempia versioita voit selata VS Coden
    <em>Timeline</em>-paneelissa (ala-vasen).
    Siell√§ n√§kyv√§t kaikki tekem√§si tiedoston tallennukset ja voit helposti avata
    ja vertailla eri
    versioita. T√§m√§ on k√§tev√§√§ esimerkiksi silloin, kun haluat palauttaa vain
    osan koodin aiemmasta
    versiosta. My√∂s GitHubin selainversiossa on <em>History</em>-toiminto, jonka
    avulla voit
    tarkastella tiedoston muutoshistoriaa suoraan selaimesta.
  </p>

  <h5>Jos kaikki menee pieleen</h5>
  <p>
    Kopioi t√§rke√§t tiedostot talteen ‚Üí poista koko kansio ‚Üí kloonaa repo
    uudestaan
    <code>git clone &lt;url&gt;</code> ‚Üí palauta t√§rke√§t tiedostot takaisin
    kansioon ja tee uusi
    commit.
  </p>

  <p class="note-box">
    Muista, ett√§ virheit√§ sattuu kaikille! T√§rkeint√§ on oppia niist√§ ja jatkaa
    eteenp√§in. Harjoitus
    tekee mestarin! üòä
  </p>

  <p>Lis√§√§ vinkkej√§ ongelmatilanteisiin</p>
  <ul>
    <li>
      <a href="https://code.visualstudio.com/docs/sourcecontrol/overview">
        Visual Studio Code - Version Control Overview</a>
    </li>
    <li><a href="https://git-scm.com/doc">Git Documentation</a></li>
    <li><a href="https://docs.github.com/">GitHub Docs</a></li>
    <li>
      <a href="https://ohshitgit.com">OhShitGit - Humoristinen ratkaisuopas</a>
    </li>
  </ul>
</section>