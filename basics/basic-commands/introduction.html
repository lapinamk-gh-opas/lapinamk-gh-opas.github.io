<section class="basic-commands">
  <h1>Git - Keskeiset komennot</h1>

  <p>
    Gitin käyttäminen komentokehotteesta on nopea ja tehokas tapa hallita
    versionhallintaa. Kun opit peruskomennot, työskentelet sujuvasti IDE:stä
    riippumatta ja saat täyden hallinnan Git-toimintoihin.
  </p>

  <p>
    Tässä on yleisimmät ja hyödyllisimmät Git-komennot, jotka jokaisen
    kehittäjän tulisi ymmärtää. Samat komennot löytyvät myös sivupalkin
    muistilistasta, joten <em>sinun ei tarvitse opetella niitä ulkoa</em>.
  </p>

  <h4>Kansionhallinta</h4>
  <h6>Siirry kansioon - <code>cd Projekti</code></h6>
  <p>
    Vaihtaa nykyisen työskentelykansion toiseen. Aja tämä ennen Git-komentoja,
    jotta olet oikeassa projektikansiossa.
  </p>

  <h6>Siirry yksi taso ylemmäs - <code>cd ..</code></h6>
  <p>
    Liikkuu hakemistopuussa ylöspäin. Eli esimerkiksi kansiosta
    <code>Projekti</code> kansioon, jossa <code>Projekti</code> sijaitsee.
  </p>

  <h6>Näytä kansion sisältö - <code>dir</code> / <code>ls</code></h6>
  <p>
    Listaa nykyisen kansion tiedostot ja kansiot (Windows: <code>dir</code>,
    macOS/Linux: <code>ls</code>). Varmistat nopeasti mitä kansiossa on.
  </p>

  <h6>Luo uusi kansio - <code>mkdir harjoitus-1</code></h6>
  <p>
    Luo tyhjän kansion esimerkiksi uutta harjoitusta tai projektia varten.
    Siirry sitten kansioon komennolla <code>cd harjoitus-1</code>.
  </p>

  <p class="note-box">
    Älä hätkähdä komentojen määrää! Käymme ne läpi tapauskohtaisesti esimerkein
    ja harjoituksin.
  </p>

  <h4>Git Peruskomennot</h4>
  <h6>Alusta uusi Git-repositorio - <code>git init</code></h6>
  <p>
    Käynnistää versionhallinnan nykyisessä kansiossa luomalla
    <code>.git</code>-hakemiston. Aja vain projektin juuressa.
  </p>

  <h6>
    Kloonaa olemassa oleva repositorio -
    <code>git clone https://github.com/user/projekti.git</code>
  </h6>
  <p>
    Lataa etärepositorion sisällön paikallisesti ja luo repositorio uuden
    kansion tietokoneellesi.
  </p>

  <h6>
    Yhdistä paikallinen repositorio etärepositorioon -
    <code>git remote add origin &lt;url&gt;</code>
  </h6>
  <p>
    Linkittää paikallisen repositorion etärepositorioon (esim. GitHubiin).
    Tarvitaan vain kerran per repositorio.
  </p>

  <!-- Accordion element with reused content starts -->
  <div
    class="accordion"
    data-include="/accordion-element/accordion.html"
    data-title="Mistä repositoriot ja sen URL-osoite löytyvät GitHubissa?"
  >
    <div
      class="contentToAccordion reused-accordion"
      data-include="/reused-accordion-content/repository-and-url.html"
    >
      <!-- Accordion content comes from /reused-accordion-content/repository-and-url.html-->
    </div>
  </div>
  <!-- Accordion element with reused content ends -->

  <h6>Näytä muutosten tila - <code>git status</code></h6>
  <p>
    Näyttää uudet, muokatut ja stagingiin lisätyt tiedostot, sekä nykyisen
    haaran. Ensimmäinen komento, kun mietit 'missä mennään'. Tiivis versio
    <code>git status -sb</code>.
  </p>

  <h6>Lisää tiedosto stagingiin - <code>git add index.html</code></h6>
  <p>
    Valmistelee yksittäisen tiedoston seuraavaan committiin. Toista useille
    tiedostoille tarpeen mukaan.
  </p>

  <h6>Lisää kaikki muutokset stagingiin - <code>git add .</code></h6>
  <p>
    Kerää tämän kansion ja alikansioiden muutokset kerralla stagingiin. Nopea
    tapa valmistella commit.
  </p>

  <div class="note-box margin-right">
    <ul>
      <li class="warning">
        Käytä komentoa <code>git add .</code> varoen. Jos olet lisännyt samaan
        kansioon arkaluontoistatietoa sisältäviä tiedostoja, joita et halua
        lisätä repositioon, niin älä käytä <code>git add .</code> komentoa tai
        lisää repositorioon <code>.gitignore</code> -tiedosto, joka estää siihen
        nimettyjen tiedostojen lisäämisen repositorioon.
      </li>
      <li>
        <code>.gitignore</code>:sta lisää tietoa osiossa:
        <a href="/teamwork/privacy-and-security.html"
          >2.5 yksityisyys ja tietoturva</a
        >
      </li>
    </ul>
  </div>
  <h6>
    Tallenna muutokset (commit) - <code>git commit -m "add index.html"</code>
  </h6>
  <p>
    Kirjaa stagingissa olevat muutokset paikalliseen historiaan. Pidä viesti
    lyhyenä, mutta kuvaavana.
  </p>

  <h6>
    Tallenna keskeneräiset muutokset väliaikaisesti (stash) -
    <code>git stash</code>
  </h6>
  <p>
    Säilyttää tekemäsi muutokset tilapäisesti ja palauttaa työskentelyhakemiston
    viimeisimpään commit-tilaan. Hyödyllinen, kun haluat vaihtaa haaraa tai
    päivittää projektin ilman, että keskeneräiset muutokset häiritsevät.
  </p>

  <p class="note-box">
    Tähän asti esitellyt komennot on <em>Perusteet</em> -osion komentoja. Voit
    keskittyä aluksi niihin.
  </p>

  <h4 id="haarojen-hallinta">Haarojen hallinta</h4>
  <h6>Näytä kaikki haarat - <code>git branch</code></h6>
  <p>
    Listaa paikalliset haarat. Nykyinen haara on merkitty tähdellä
    (<code>*</code>).
  </p>

  <h6>Luo ja siirry haaraan - <code>git checkout -b haaran-nimi</code></h6>
  <p>
    Luo uuden kehityshaaran ja vaihtaa siihen. Vaihtoehtoisesti
    <code>git switch -c haaran-nimi</code>.
  </p>

  <h6>
    Siirry olemassa olevaan haaraan - <code>git checkout haaran-nimi</code>
  </h6>
  <p>
    Vaihda kehitystyö toiseen haaraan. Varmista, että keskeneräiset muutokset on
    commitoitu tai stashattu ennen vaihtoa. Vaihtoehtoisesti
    <code>git switch haaran-nimi</code>
  </p>

  <h6>
    Hae ja yhdistä tietyn etärepositorion haaran muutokset -
    <code>git pull origin haaran-nimi</code>
  </h6>
  <p>
    Hakee uusimmat commitit etärepositorion haarasta ja yhdistää ne nykyiseen
    haaraan.
  </p>

  <h6>
    Puske haaran sisältö ja aseta seuranta -
    <code>git push -u origin haaran-nimi</code>
  </h6>
  <p>
    Luo uuden haaran etärepositorioon (esim. GitHubiin), puskee paikallisen
    haaran sisällön sinne ja asettaa upstreamin, eli yhdistää paikallisen ja
    etähaaran, jolloin jatkossa riittää pelkkä
    <code>git push</code>.
  </p>

  <div class="note-box">
    <code>-u</code> (tai <code>--set-upstream</code>) -lippu kertoo Gitille,
    mikä etärepositorion haara vastaa paikallista haaraa, ja tallentaa tämän
    tiedon. Voit ajatella asian näin: repositorio on talo ja haara on asunto; -u
    kertoo paikalliselle haaralle, mikä etähaara on “sen asunto”, eli mihin
    muutokset lähetetään ja mistä ne haetaan jatkossa.
  </div>

  <h6>Hae ja yhdistä etärepositorion muutokset - <code>git pull</code></h6>
  <p>
    Hakee uusimmat commitit etärepositorion paikallista haaraa vastaavasta
    haarasta ja yhdistää ne nykyiseen paikalliseen haaraan. Toimii vain, kun git
    on asetettu seuraamaan (<code>push -u</code>) etärepositorion haaraa.
  </p>

  <h6>Puske muutokset etärepositorioon - <code>git push</code></h6>
  <p>
    Julkaisee paikallisen haaran commitit etärepositorion haaraan. Toimii vain,
    kun git on asetettu seuraamaan (<code>push -u</code>) etärepositorion
    haaraa.
  </p>

  <h6>Yhdistä haara nykyiseen - <code>git merge haaran-nimi</code></h6>
  <p>
    Yhdistää haara nykyiseen haaraan. Varmista, että työpuu on puhdas ennen
    yhdistämistä, eli kaikki muutokset on commitoitu ja staging on tyhjä.
  </p>
  <h6>Poista haara - <code>git branch -d haaran-nimi</code></h6>
  <p>
    Poistaa paikallisen haaran. Varmista, että kaikki muutokset on yhdistetty
    ennen poistamista. Poista etähaara komennolla
    <code>git push -d origin dev</code>.
  </p>

  <h4>Lisäkomennot</h4>
  <h6>Näytä erot muutosten välillä - <code>git diff</code></h6>
  <p>
    Vertaa työpuuta viimeisimpään commit-tilaan. Tarkista stagingiin lisätyt
    erot lisäämällä <code>--staged</code>.
  </p>

  <h6>
    Palauta tiedosto viime commitin tilaan - <code>git restore index.html</code>
  </h6>
  <p>
    Kumoaa paikalliset muutokset valitussa tiedostossa. Turvallinen tapa perua
    yksittäisen tiedoston muokkaukset.
  </p>

  <h6>Peru viimeisin commit - <code>git reset HEAD~</code></h6>
  <p>
    Siirtää historian osoitinta taaksepäin jättäen muutokset työpuuhun (oletus
    <code>--mixed</code>). Vaihtoehdot: <code>--soft</code> (jättää stagingiin)
    ja <code>--hard</code> (poistaa muutokset, älä käytä ellet ole aivan
    varma!).
  </p>

  <h6>Näytä commit-historia - <code>git log</code></h6>
  <p>
    Listaa commitit nykyisessä haarassa uusimmasta vanhimpaan. Lisää
    <code>--oneline</code> tiiviimpään näkymään.
  </p>

  <p>
    Säännöllinen käyttö tekee komennoista rutiinia ja Gitin käytöstä sujuvaa.
    Kappaleiden edetessä voit aina palata tähän listaan, tai sivupalkin
    muistilistaan kertaamaan komentoja ja niiden käyttötarkoituksia.
  </p>

  <p class="note-box">Muista, että harjoitus tekee mestarin!</p>

  <p>
    Lisää tietoa komennoista:
    <a href="https://git-scm.com/docs">https://git-scm.com/docs</a>.
  </p>
</section>
