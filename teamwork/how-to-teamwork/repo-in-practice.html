<section class="repo-in-practice">
  <header>
    <h1>Repositorion asetukset käytännössä</h1>
  </header>

  <p>
    GitHub-repositorion <strong>asetuksista</strong> hallitaan projektin
    näkyvyyttä, käyttäjien käyttöoikeuksia ja suojauksia. Oikein määritetyt
    asetukset parantavat projektin tietoturvaa, ylläpidettävyyttä ja
    yhteistyötä.
  </p>

  <p>
    Tässä osiossa käydään läpi tärkeimmät asetukset, kuten repositorion
    näkyvyyden muuttaminen, käyttäjien (<em>collaborators</em>) lisääminen,
    haarojen suojaaminen (<em>branch protection rules</em>), sekä repositorion
    poistaminen. <strong>Ehkä?</strong> Lisäksi tutustutaan muutamiin
    hyödyllisiin perusasetuksiin, kuten oletushaaran määrittämiseen ja projektin
    kuvaukseen.<strong>Ehkä?</strong>
  </p>

  <!--Accordion 1.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Repositorion näkyvyyden muuttaminen"
  >
    <div class="contentToAccordion">
      <div class="note-box">
        <ul>
          <li class="warning">
            Kun muutat GitHub-repositorion <strong>julkiseksi (Public)</strong>,
            koko sen sisältö ja
            <strong>kaikki aiemmat commit-historiat</strong> tulevat kaikkien
            nähtäville. Tämä koskee myös tiedostoja ja tietoja, jotka on
            myöhemmin poistettu projektista.
          </li>
          <li class="warning">
            Älä muuta repositoriota julkiseksi, jos se
            <strong>sisältää tai on joskus sisältänyt</strong> arkaluontoisia
            tietoja, kuten:
            <ul>
              <li>salasanoja, API-avaimia tai käyttöoikeustunnuksia,</li>
              <li>henkilötietoja tai muuta luottamuksellista aineistoa,</li>
              <li>maksullisia tai lisenssisuojattuja tiedostoja.</li>
            </ul>
          </li>
          <li>
            Julkiseksi muuttaminen sopii vain avoimen lähdekoodin projekteihin
            tai työnäytteiksi tarkoitettuihin repositorioihin.
          </li>
          <li>
            Julkiseksi muuttaminen sisältää monta vaihetta, joten vahingossa
            tapahtuvaa näkyvyyden muuttamista ei tarvitse pelätä.
          </li>
          <li>
            Mikäli haluat poistaa arkaluontoiset tiedot kokonaan historiasta,
            käytä Gitin historiaan vaikuttavia työkaluja, kuten
            <code>git filter-repo</code> tai GitHubin
            <a
              href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository"
              target="_blank"
              >virallista ohjetta tiedon poistamiseen historiasta</a
            >.
          </li>
        </ul>
      </div>

      <ol>
        <li>
          Siirry repositorion asetuksiin klikkaamalla repositoriossa
          <strong>settings</strong>
          välilehteä.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-1.webp"
              alt="Repositorion asetukset."
            />
            <figcaption>Repositorion asetukset.</figcaption>
          </figure>
        </li>
        <li>
          Varmista, että olet asetuksien <strong>General</strong> osiossa ja
          scrollaa ikkunan alareunaan.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-2.webp"
              alt="Asetuksien General osio."
            />
            <figcaption>Asetuksien General osio.</figcaption>
          </figure>
          Klikkaa Danger Zone osiosta <strong>Change Visibility</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-3.webp"
              alt="Näkyvyys asetuksen muuttaminen."
            />
            <figcaption>Näkyvyys asetuksen muuttaminen.</figcaption>
          </figure>
          Klikkaa Vielä alle avautuvaa <strong>Change to public</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-4.webp"
              alt="Muuttaminen julkiseksi."
            />
            <figcaption>Muuttaminen julkiseksi.</figcaption>
          </figure>
        </li>
        <li>
          Vahvista vielä avautuvaan ruutuun, että haluat tehdä repositoriosta
          julkisen klikkaamalla
          <strong>I want to make this repository public</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-5.webp"
              alt="Vahvistus repositorion muuttamisesta julkiseksi."
            />
            <figcaption>
              Vahvistus repositorion muuttamisesta julkiseksi.
            </figcaption>
          </figure>
          Vahvista vielä, että olet ymmärtänyt mitä repositorion julkiseksi
          muuttaminen tarkoittaa klikkaamalla
          <strong>I have read and understand these effects</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-6.webp"
              alt="Vahvistus että olet ymmärtänyt mitä repositorion julkiseksi
              muuttaminen tarkoittaa."
            />
            <figcaption>
              Vahvistus että olet ymmärtänyt mitä repositorion julkiseksi
              muuttaminen tarkoittaa.
            </figcaption>
          </figure>
          Tee repositoriosta julkinen klikkaamalla
          <strong>Make this repository public</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-7.webp"
              alt="Tee repositoriosta julkinen."
            />
            <figcaption>Tee repositoriosta julkinen.</figcaption>
          </figure>
        </li>
        <li>
          Mikäli käytössä on kaksivaiheinen tunnistautuminen vahvista vielä
          käyttöoikeutesi syöttämällä tunnistautumissovelluksesi antama
          <strong>avain</strong> ja klikkaamalla <strong>verify</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-8.webp"
              alt="Käyttöoikeuden vahvistus."
            />
            <figcaption>Käyttöoikeuden vahvistus.</figcaption>
          </figure>
        </li>
        <li>
          Repositorio on nyt julkinen. Muuttaminen yksityiseksi noudattaa täysin
          samaa kaavaa kuin muutos julkiseksi.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-9.webp"
              alt="Repositorio on nyt julkinen."
            />
            <figcaption>Repositorio on nyt julkinen.</figcaption>
          </figure>
        </li>
      </ol>
      <p class="note-box keep-margin">
        Repositorion näkyvyyttä voi muuttaa myöhemmin takaisin yksityiseksi
        (<strong>Private</strong>), jos haluat rajata sen näkyvyyttä uudelleen.
        Muista kuitenkin, että kaikki ennen muutosta ladatut tai kloonatut
        versiot jäävät käyttäjille, joilla ne jo olivat.
      </p>
    </div>
  </div>
  <!--Accordion 1. ends-->
  <!--Accordion 2.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Käyttäjien (Collaborators) lisääminen ja kutsun hyväksyminen"
  >
    <div class="contentToAccordion">
      <div class="note-box">
        <ul>
          <li class="warning">
            Kun lisäät henkilökohtaisella GitHub-tilillä käyttäjän repositorion
            <strong>collaboratoriksi</strong>, annat hänelle suoran
            kirjoitusoikeudet (<em>write</em>) projektiin. Tämä tarkoittaa, että
            hän voi tehdä
            <strong>commit-, push- ja merge-toimenpiteitä</strong>
            ilman erillistä hyväksyntää.
          </li>
          <li>
            Kirjoitusoikeudet eivät kuitenkaan mahdollista repositorion
            poistamista, asetusten muuttamista tai muiden käyttäjien hallintaa.
            Näihin tarvitaan <strong>Admin</strong>-oikeudet, jotka ovat
            yksityisellä tilillä perustetussa repositoriossa vain sen
            luojalla/omistajalla.
          </li>
          <li>
            Lisää collaboratoriksi kuitenkin vain henkilöitä, joihin luotat ja
            joiden on tarkoitus työskennellä aktiivisesti projektissa.
          </li>
          <li>
            Mikäli käytät <strong>organisaatiotiliä</strong>, voit määrittää
            käyttäjille eri <strong>roolit</strong> (esimerkiksi Read, Triage,
            Write, Maintain, Admin) riippuen siitä, mitä oikeuksia haluat antaa.
          </li>
        </ul>
      </div>
      <ol>
        <li>
          Siirry repositorion asetuksiin klikkaamalla repositoriossa
          <strong>settings</strong>
          välilehteä.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-1.webp"
              alt="Repositorion asetukset."
            />
            <figcaption>Repositorion asetukset.</figcaption>
          </figure>
        </li>
        <li>
          Siirry repositorion käyttäjä asetuksiin klikkaamalla
          <strong>Collaborators</strong>
          osiota.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-1.webp"
              alt="Repositorion asetukset (päänäkymä)."
            />
            <figcaption>Repositorion asetukset (päänäkymä).</figcaption>
          </figure>
        </li>
        <li>
          Mikäli käytössä on kaksivaiheinen tunnistautuminen vahvista vielä
          käyttöoikeutesi syöttämällä tunnistautumissovelluksesi antama
          <strong>avain</strong> ja klikkaamalla <strong>verify</strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/visibility-8.webp"
              alt="Käyttöoikeuden vahvistus."
            />
            <figcaption>Käyttöoikeuden vahvistus.</figcaption>
          </figure>
        </li>
        <li>
          Näkymä kun reposiitoriolla ei ole vielä sinun lisäksi muita käyttäjiä.
          Aloita käyttäjän lisääminen klikkaamalla
          <strong>Add people</strong>
          nappia.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-2.webp"
              alt="Repositorion käyttäjä asetukset ja lisäämisen aloitus."
            />
            <figcaption>
              Repositorion käyttäjä asetukset ja lisäämisen aloitus.
            </figcaption>
          </figure>
        </li>
        <li>
          Etsi lisättävä käyttäjä avautuvasta ruudusta syöttämällä
          <strong>kenttää</strong> käyttäjän nimi, nimimerkki tai
          sähköpostiosoite ja valitse haluttu käyttäjä klikkaamalla alle
          avautuvasta <strong>listasta</strong>.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-3.webp"
              alt="Lisättävän käyttäjän etsiminen."
            />
            <figcaption>Lisättävän käyttäjän etsiminen.</figcaption>
          </figure>
          Vahvista käyttäjän lisääminen klikkaamalla
          <strong>Add <em>käyttäjänimi</em></strong> nappia.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-4.webp"
              alt="Valitun käyttäjän lisäämisen vahvistus."
            />
            <figcaption>Valitun käyttäjän lisäämisen vahvistus.</figcaption>
          </figure>

          <strong>Käyttäjälle</strong> on nyt lähetetty kutsu liittyä
          repositorion käyttäjäksi.
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-5.webp"
              alt="Käyttäjälle on nyt lähetetty kutsu."
            />
            <figcaption>Käyttäjälle on nyt lähetetty kutsu.</figcaption>
          </figure>
        </li>
        <li>
          Käyttäjän pitää siis hyväksyä kutsu omalta tililtään, jotta lisäys on
          onnistunut. Kutsu löytyy tilin ilmoituksista, jonne pääseen
          klikkaamalla
          <strong>inbox-ikonia</strong> oikelta yläreunasta.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-6.webp"
              alt="Käyttäjälle tulleet viestit löytyvät inbox-kuvakketta klikkaamalla."
            />
            <figcaption>
              Käyttäjälle tulleet viestit löytyvät inbox-kuvakketta
              klikkaamalla.
            </figcaption>
          </figure>
        </li>
        <li>
          Avaa kutsu klikkaamalla <strong>ilmoitusta</strong> viestien listasta.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-7.webp"
              alt="Näkymä käyttäjälle tulleista ilmoituksista."
            />
            <figcaption>Näkymä käyttäjälle tulleista ilmoituksista.</figcaption>
          </figure>
        </li>
        <li>
          Hyväksy kutsu klikkaamalla <strong>Accept invitation</strong> nappia.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-8.webp"
              alt="Kutsun hyväksyminen."
            />
            <figcaption>Kutsun hyväksyminen.</figcaption>
          </figure>
        </li>
        <li>
          Käyttäjä on nyt lisätty repositoriolle.

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/repo-settings/collaborators-9.webp"
              alt="Käyttä lisätty repositoriolle."
            />
            <figcaption>Käyttä lisätty repositoriolle.</figcaption>
          </figure>
        </li>
      </ol>
    </div>
  </div>
  <!--Accordion 2. ends-->
  <!--Accordion 3.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Haarasuojauksen (Branch protection rules) muuttaminen"
  >
    <div class="contentToAccordion">
      <div class="note-box">
        <ul>
          <li class="warning">
            <strong>Branch protection rules</strong> suojaavat tärkeimmät haarat
            (esim. <code>main</code>) tahattomilta muutoksilta tai virheiltä.
            Kun suojaus on käytössä, et voi tehdä suoria muutoksia suojattuun
            haaraan komennolla <code>git push</code> tai yhdistää muutoksia
            ilman tarkistuksia.
          </li>
          <li>
            Suojauksen asetuksista riippuen GitHub voi esimerkiksi vaatia:
            <ul>
              <li>Pull requestin hyväksynnän ennen yhdistämistä,</li>
              <li>onnistuneen testin tai tarkistuksen (status check),</li>
              <li>että haaran historia on ajan tasalla ennen mergeä,</li>
              <li>tai estää haaran poistamisen kokonaan.</li>
            </ul>
          </li>
          <li>
            Näiden asetusten tarkoituksena on varmistaa, että
            <strong>main-haaran</strong>
            sisältö pysyy aina toimintakuntoisena ja virheettömänä.
          </li>
        </ul>
      </div>
      <ol>
        <li>sisältö tähän</li>
      </ol>
    </div>
  </div>
  <!--Accordion 3. ends-->
  <!--Accordion 4.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Repositorion poistaminen"
  >
    <div class="contentToAccordion">
      <div class="note-box">
        <ul>
          <li class="warning">
            Repositorion poistaminen (<strong>Delete this repository</strong>)
            on <strong>pysyvä toimenpide</strong>. Kun poistat repositorion, sen
            kaikki tiedostot, commit-historia, asetukset katoavat pysyvästi eikä
            niitä voi palauttaa GitHubin kautta.
          </li>

          <li class="warning">
            Älä poista repositoriota, jos et ole varma, ettei siitä tarvita enää
            mitään sisältöä tai commit-historiaa myöhemmin. Turvallisempaa voi
            olla ensin muuttaa repositorio <strong>Private</strong>-tilaan.
          </li>
          <li>
            Jos haluat varmistaa, että sinulla on kopio projektista ennen
            poistamista, voit kloonata sen omalle koneellesi komennolla:<br />
            <code>git clone [repositorion-url]</code>
          </li>
        </ul>
      </div>
      <ol>
        <li>sisältö tähän</li>
      </ol>
    </div>
  </div>
  <!--Accordion 3. ends-->
</section>
