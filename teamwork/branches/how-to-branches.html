<section class="branches">
  <header>
    <h1>Miten haarat toimivat Gitissä</h1>
  </header>
  <p>
    Tässä osiossa opit, kuinka luodaan uusi haara paikallisesti, miten muutokset
    tallennetaan ja siirretään etärepositorioon, sekä lopuksi kuinka yhdistät
    (<em>merge</em>) valmiin <em>feature</em>-haaran takaisin
    <em>main</em>-haaraan. Menetelmät soveltuvat erityisesti <strong>pieniin
    projekteihin</strong> ja <strong>henkilökohtaiseen kehitystyöhön</strong>.
    Tiimityössä on kuitenkin
    suositeltavaa hyödyntää
    <a href="/teamwork/pullrequests.html">Pull Requestejä</a> koodikantojen
    yhdistämiseen.
  </p>
  <!--Accordion 1.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Uuden haaran luominen komentokehottella">
    <div class="contentToAccordion">
      <ol>
        <li>
          <ul>
            <li>
              Siirry kansioon, jossa paikallinen
              <strong>git-opas</strong>-repositoriosi sijaitsee
              komennolla<br />
              <code>cd polku/kansioon/jossa/git-opas/on</code>
            </li>
            <li>
              Git Bash näyttää haaran jossa parhaillaan
              työskennellään (katso alla oleva esimerkki
              <code>main</code>)
            </li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/branches/git branches 1.webp"
              alt="Siirtyminen oikeaan kansioon ja haaran nimi" />
            <figcaption>Siirtyminen oikeaan kansioon ja haaran nimi</figcaption>
          </figure>
        </li>
        <li>
          <ul>
            <li>
              Luo uusi haara komennolla<br />
              <code>git checkout -b haaran-nimi</code>
            </li>
            <li>
              Varmista, että haaran nimi vaihtui
              <strong>mainista</strong> antamaasi haaran nimeen
            </li>
            <li>
              Lisää uusi tiedosto komennolla<br />
              <code>echo "Teksti sisältö tähän" >> tiedoston-nimi-tähän.md</code>
            </li>
            <li>
              Muokkaa olemassa olevaa README.md tiedostoa komennolla<br />
              <code>echo "Lisättävä muutos tähän" >> README.md</code>
            </li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 12.webp"
              alt="Uusi haara ja tiedostomuutokset Git Bashillä" />
            <figcaption> Uusi haara ja tiedostomuutokset Git Bashillä
            </figcaption>
          </figure>
        </li>
        <li>
          <ul>
            <li>
              Lisää tiedostot staging-tilaan komennolla<br />
              <code>git add .</code>
            </li>
            <div class="note-box margin-right">
              <ul>
                <li>
                  Tämän voisi tehdä myös komennolla <br />
                  <code> git add uuden-tiedoston-nimi.md muutetun-tiedoston-nimi.md </code>
                </li>
                <li>
                  Jos muutokset koskevat useita tiedostoja, on helpompi lisätä
                  kaikki tiedostot
                  kerralla käyttäen komentoa
                  <code>git add .</code>
                </li>

                <li class="warning">
                  Käytä komentoa
                  <code>git add .</code>
                  varoen. Varsinkin jos projekti sisältää arkaluontoista tietoa.
                  Harkitse myös
                  <code>.gitignore</code>
                  -tiedoston lisäämistä projektiin. Lisää tietoa gitignoresta
                  luvussa
                  <a href="/teamwork/privacy-and-security.html">2.5 Yksityisyys ja tietoturva</a>.
                </li>
              </ul>
            </div>
            <li>
              Tee commit ja lisää viesti komennolla<br />
              <code>git commit -m "commit viesti tähän"</code>
            </li>
            <li>
              Vie muutokset etärepositorioon ja luo sinne uusi haara<br />
              <code>git push -u origin haaran-nimi</code>
            </li>
            <p class="note-box margin-right keep-margin">
              <code>push</code> - vie muutokset etärepositorioon<br />
              <code>-u</code> - asettaa paikallisen haaran seuraamaan etähaaraa
              <br />
              <code>origin</code> - etärepositorion nimi (oletus nimi origin),
              viite repon
              url-osoitteeseen<br />
              <code>haaran-nimi</code> - eli haara jossa olet
            </p>
          </ul>

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 13.webp"
              alt="Uuden haaran muutosten commitointi ja vieminen etärepositorioon Git Bashillä" />
            <figcaption>
              Uuden haaran muutosten commitointi ja vieminen etärepositorioon
              Git Bashillä
            </figcaption>
          </figure>
        </li>
        <li>
          <ul>
            <li>Siirry selaimella GitHubiin</li>
            <li>Klikkaa haaran valintaa, jossa lukee <strong>main</strong></li>
            <li>Valitse uusi haara</li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 14.webp"
              alt="Uusi haara GitHubissa" />
            <figcaption>Uusi haara GitHubissa</figcaption>
          </figure>
          <ul>
            <li>Tarkastele uuden haaran sisältöä</li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 15.webp"
              alt="Muutokset GitHubissa" />
            <figcaption>Muutokset GitHubissa</figcaption>
          </figure>
        </li>
      </ol>
    </div>
  </div>
  <!--Accordion 1. ends-->
  <!--Accordion 2.-->
  <div
    class="accordion"
    data-include="../../accordion-element/accordion.html"
    data-title="Feature-haaran yhdistäminen main-haaraan komentokehottella">
    <div class="contentToAccordion">
      <ol>
        <li>
          <ul>
            <li>
              Siirry main-haaraan komennolla<br />
              <code>git checkout main</code> tai <code>git switch main</code>
            </li>
            <li>
              Varmista, että haaran nimi vaihtui takaisin
              <strong>mainiksi</strong>
            </li>
            <li>
              Yhdistä etärepositorion main-haaran viimeisin tila paikalliseen
              main-haaraan komennolla<br />
              <code>git pull origin main</code>
              <p class="note-box margin-right keep-margin">
                Jos käytit aiemmin komentoa
                <code>git push -u origin main</code> niin nyt riittää komento
                <code>git pull</code>
              </p>
            </li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 16.webp"
              alt="Siirry main-haaraan ja hae sen viimeisin tila Git Bashillä" />
            <figcaption> Siirry main-haaraan ja hae sen viimeisin tila Git
              Bashillä </figcaption>
          </figure>
        </li>
        <li>
          <ul>
            <li>
              Tuo paikallisen feature-haaran muutokset paikalliseen main-haaraan
              komennolla<br />
              <code>git merge yhdistettävän-haaran-nimi</code>
            </li>
            <p class="note-box margin-right">
              Jos konflikteja ilmenee, Git ilmoittaa ja pyytää ratkaisemaan ne
              tässä kohtaa. Tästä
              lisää osiossa
              <a href="/teamwork/merge-conflicts.html">2.4 Merge-konfliktit</a>.
            </p>
            <li>
              Vie muutokset etärepositorioon komennolla<br />
              <code>git push origin main</code>
            </li>
            <p class="note-box margin-right keep-margin">
              Tässäkin riittää komento
              <code>git push</code>, mikäli <code>-u</code> lippua on jo
              käytetty.
            </p>
          </ul>

          <figure>
            <img
              class="wide-image"
              src="../../assets/images/basics/IDE-and-usage/terminal/Git usage terminal 17.webp"
              alt="Uuden haaran muutosten commitointi ja vieminen etärepositorioon Git Bashillä" />
            <figcaption>
              Uuden haaran muutosten commitointi ja vieminen etärepositorioon
              Git Bashillä
            </figcaption>
          </figure>
        </li>
        <li>
          <ul>
            <li>
              Siirry selaimella GitHubiin ja klikkaa haaran valintaan
              käytettävää alasvetovalikkoa
            </li>
            <li>Valitse listasta <strong>main</strong>-haara</li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/branches/git branches 2.webp"
              alt="Uusi haara GitHubissa" />
            <figcaption>Haarat GitHubissa</figcaption>
          </figure>
          <ul>
            <li>
              Tarkastele näkymää <strong>main</strong>-haaran sisällöstä, joka
              vastaa yhdistetyn haaran sisältöä
            </li>
          </ul>
          <figure>
            <img
              class="wide-image"
              src="../../assets/images/teamwork/branches/git branches 3.webp"
              alt="Muutokset GitHubissa" />
            <figcaption>Muutokset GitHubissa</figcaption>
          </figure>
        </li>
      </ol>
    </div>
  </div>
  <!--Accordion 2. ends-->

  <p class="note-box">
    <strong>Vinkki!</strong> Muista hyödyntää sivupalkin muistilistoja tarpeen
    mukaan!
  </p>
</section>